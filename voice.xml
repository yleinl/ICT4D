<?xml version="1.0" encoding="UTF-8"?>
<vxml version="2.1">

    <form id="languageSelection">
        <block>
            <prompt>Welcome to METEO Service, your weather companion for farming success. Please select your language preference.</prompt>
            <field name="language">
                <prompt>Press 1 for English. Press 2 for French. Press 3 for local languages like Bambara or Mooré.</prompt>
                <grammar src="builtin:dtmf/digits"/>
                <filled>
                    <if cond="language=='1'">
                        <prompt>You selected English.</prompt>
                    </if>
                    <if cond="language=='2'">
                        <prompt>You selected French.</prompt>
                    </if>
                    <if cond="language=='3'">
                        <prompt>You selected a local language.</prompt>
                    </if>
                    <submit next="mainMenu.vxml" method="post"/>
                </filled>
            </field>
        </block>
    </form>

    <menu id="mainMenu">
        <prompt>Please choose from the following options.</prompt>
        <choice next="#weatherReport">Press 1 for Weather Report.</choice>
        <choice next="#seasonalWeather">Press 2 for Seasonal Weather Patterns and Predictions.</choice>
        <choice next="#plantingSuggestions">Press 3 for Planting Suggestion Based on Current Weather.</choice>
        <choice next="#reportRainfall">Press 4 to Report Local Rainfall.</choice>
        <choice next="#indigenousKnowledge">Press 5 for Indigenous Knowledge on Rainfall.</choice>
        <choice next="#agriculturalKnowledge">Press 6 for Agricultural Knowledge Today.</choice>
        <choice next="#subscribeAlerts">Press 7 for Alert Subscription.</choice>
        <choice next="#mainMenu" dtmf="0">Press 0 to repeat these options.</choice>
    </menu>

    <form id="weatherReport">
        <field name="weatherOption">
            <prompt>Access detailed daily and weekly weather forecasts to support your farming decisions. Please select the type of forecast you need. Press 0 for Today's Weather. Press 1 to 7 for Weather Forecasts for the Next Seven Days. Press 8 for a Weekly Weather Summary. Press 9 to Return to the Main Menu.</prompt>
            <grammar src="builtin:dtmf/digits"/>
            <filled>
                <if cond="weatherOption == 9">
                    <goto next="#mainMenu"/>
                </if>
                <if cond="weatherOption == 8">
                    <prompt>Here is the weekly weather summary: Highs of 28°C, lows of 15°C, with a chance of rain towards the weekend.</prompt>
                </if>
                <if cond="weatherOption >= 0 and weatherOption <= 7">
                    <prompt>You've selected day <value expr="weatherOption"/>. Highs of 24°C, lows of 16°C, chance of rain 20%.</prompt>
                </if>
                <goto next="#mainMenu"/>
            </filled>
        </field>
    </form>

    <form id="seasonalWeather">
        <block>
            <prompt>Here's an outlook on weather patterns for the upcoming months: Expect a warmer than average season with periodic rainfalls.</prompt>
            <goto next="#mainMenu"/>
        </block>
    </form>

    <form id="plantingSuggestions">
        <field name="cropType">
            <prompt>For planting suggestions based on current and upcoming weather conditions, please select your crop. Press 1 for grains. Press 2 for vegetables. Press 3 for fruits. Press 4 to specify another crop. Press 9 to return to the main menu.</prompt>
            <grammar src="builtin:dtmf/digits"/>
            <filled>
                <if cond="cropType=='1'">
                    <prompt>For grains like wheat and maize, start planting in the next two weeks for optimal growth.</prompt>
                </if>
                <if cond="cropType=='2'">
                    <prompt>For vegetables like tomatoes and peppers, ensure to provide adequate water due to expected dry conditions.</prompt>
                </if>
                <if cond="cropType=='3'">
                    <prompt>For fruits such as mangoes and citrus, now is a good time to prune and fertilize.</prompt>
                </if>
                <if cond="cropType=='4'">
                    <prompt>Please specify the crop you are interested in.</prompt>
                </if>
                <if cond="cropType=='9'">
                    <goto next="#mainMenu"/>
                </if>
                <goto next="#mainMenu"/>
            </filled>
        </field>
    </form>

    <form id="reportRainfall">
        <field name="rainfallAmount">
            <prompt>Contribute to our weather database by reporting rainfall in your area. Please enter the amount of rainfall in your area using the keypad, followed by the # key.</prompt>
            <grammar src="builtin:dtmf/digits"/>
            <filled>
                <prompt>Thank you for reporting. Your rainfall data helps improve weather predictions for all farmers.</prompt>
                <goto next="#mainMenu"/>
            </filled>
        </field>
    </form>

    <menu id="indigenousKnowledge">
        <prompt>Explore ancient wisdom for modern farming success. Please select a topic of interest.</prompt>
        <choice next="#weatherSigns">Press 1 to learn about signs from nature for weather prediction.</choice>
        <choice next="#farmingPractices">Press 2 to discover traditional farming practices for weather adaptation.</choice>
        <choice next="#farmerStories">Press 3 to hear stories and lessons from local farmers.</choice>
        <choice next="#mainMenu" dtmf="9">Press 9 to return to the main menu.</choice>
    </menu>

    <form id="weatherSigns">
        <block>
            <prompt>Detailed examples of how specific birds' activities or the appearance of certain plants are traditionally interpreted as signs predicting the start of the rainy season.</prompt>
            <goto next="#mainMenu"/>
        </block>
    </form>

    <form id="farmingPractices">
        <block>
            <prompt>Insights into traditional methods of soil conservation, water management, and crop selection that align with anticipated weather conditions.</prompt>
            <goto next="#mainMenu"/>
        </block>
    </form>

    <form id="farmerStories">
        <block>
            <prompt>Narratives and anecdotes from farmers illustrating practical applications of indigenous weather prediction and its impact on agricultural decisions.</prompt>
            <goto next="#mainMenu"/>
        </block
    </form>

    <menu id="agriculturalKnowledge">
        <prompt>Access daily agricultural tips, updates, and best practices. Please select a category.</prompt>
        <choice next="#soilManagement">Press 1 for soil management tips.</choice>
        <choice next="#waterConservation">Press 2 for water conservation techniques.</choice>
        <choice next="#pestControl">Press 3 for pest control.</choice>
        <choice next="#cropRotation">Press 4 for crop rotation advice.</choice>
        <choice next="#mainMenu" dtmf="9">Press 9 to return to the main menu.</choice>
    </menu>

    <form id="soilManagement">
        <block>
            <prompt>Daily tips on soil management to enhance your crop yields.</prompt>
            <goto next="#mainMenu"/>
        </block>
    </form>

    <form id="waterConservation">
        <block>
            <prompt>Water conservation techniques that can be employed to ensure efficient use of resources.</prompt>
            <goto next="#mainMenu"/>
        </block>
    </form>

    <form id="pestControl">
        <block>
            <prompt>Best practices for managing pests in your crops, ensuring healthy and robust yields.</prompt>
            <goto next="#mainMenu"/>
        </block>
    </form>

    <form id="cropRotation">
        <block>
            <prompt>Advice on crop rotation strategies to maintain soil fertility and manage pest and disease problems.</prompt>
            <goto next="#mainMenu"/>
        </block>
    </form>

    <form id="subscribeAlerts">
        <field name="alertDetails">
            <prompt>Subscribe to weather and agricultural alerts personalized to your location and crop preference. Please enter your location and crop preference after the tone.</prompt>
            <grammar src="builtin:dtmf/digits"/>
            <filled>
                <prompt>Subscription successful. You will now receive timely alerts based on your input.</prompt>
                <goto next="#mainMenu"/>
            </filled>
        </field
    </form>

    <catch event="connection.disconnect.hangup">
        <prompt>Thank you for calling METEO Service. Goodbye!</prompt>
    </catch>

    <catch event="noinput">
        <prompt>We did not receive your selection. Please try again.</prompt>
        <reprompt/>
    </catch>

    <catch event="nomatch">
        <prompt>We did not understand your selection. Please try again.</prompt>
        <reprompt/>
    </catch>

</vxml>
